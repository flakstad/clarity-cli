{{define "workspaces_main"}}
<main id="clarity-main" data-view="workspaces">
  <h1>Workspaces</h1>

  {{if .Message}}<div class="msg">{{.Message}}</div>{{end}}

  <div class="card">
    <div><strong>Current</strong>: <code>{{.CurrentWorkspace}}</code></div>
  </div>

  <div class="card">
    <div><strong>All workspaces</strong> ({{len .Entries}})</div>
    {{if .Entries}}
      <ul>
        {{range .Entries}}
          <li style="margin: 6px 0;">
            <form method="post" action="/workspaces/use" style="display:inline;">
              <input type="hidden" name="name" value="{{.Name}}">
              <button
                type="submit"
                data-kb-item
                data-focus-id="{{.Name}}"
                style="font: inherit; padding: 4px 8px; border-radius: 8px;"
              >
                {{if eq $.CurrentWorkspace .Name}}<strong>{{.Name}}</strong>{{else}}{{.Name}}{{end}}
              </button>
            </form>
            <span class="dim" style="margin-left: 8px;">
              {{if .Ref.Kind}}{{.Ref.Kind}}{{else}}workspace{{end}}
              — <code>{{.Ref.Path}}</code>
            </span>
          </li>
        {{end}}
      </ul>
      <div class="dim" style="margin-top: 10px;">Keys: <code>j/k</code>, <code>↑/↓</code>, <code>Enter</code></div>
    {{else}}
      <div>(none)</div>
    {{end}}
  </div>
</main>
{{end}}

{{define "workspaces.html"}}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Clarity Web – Workspaces</title>
  <link rel="stylesheet" href="/static/themes.css">
  <link rel="stylesheet" href="/static/app.css">
</head>
<body>
  {{template "web_header" .}}
  {{template "workspaces_main" .}}
  {{template "web_scripts" .}}
</body>
</html>
{{end}}
